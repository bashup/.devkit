#!/usr/bin/env bash

# Use cram and watch for testing, and provide a shell console
import: cram
import: entr-watch
import: shell-console

dk.rebuild() {
    require-any bashpackr basher install bashup/bashpackr
    bashpackr --pack dk.md dk
}

# Auto-build dk and re-exec it if needed
if [[ ! -x dk || dk.md -nt dk ]]; then
    dk.rebuild; touch dk
    exec "./dk" "${LOCO_ARGS[@]}"
fi
